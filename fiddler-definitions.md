## What is a Proxy?

If you had asked me this question back in the early 1990s, I would have likely replied, "It's that thing that kills your Internet connection, right?" I wasn't entirely wrong. Back in the day, if I had a proxy configured on my machine then I'd often see broken images on webpages. Obviously, things have improved since then. However, the question remains a good one to ask, especially for developers writing applications that will support them.

The [section 2.3 of the HTTP specification](https://httpwg.org/specs/rfc7230.html#intermediaries) defines a proxy as:

> a message-forwarding agent that is selected by the client, usually via local configuration rules, to receive requests for some type(s) of absolute URI and attempt to satisfy those requests via translation through the HTTP interface

The phrase, "selected by the client" in the description (above) is a key characteristic; a proxy is designated by a [user agent](https://en.wikipedia.org/wiki/User_agent) (UA) to convey messages to "origin server" (i.e. google.com). It's also specialised because it may perform actions on messages that are received. (More on this later.)

![](https://i.imgur.com/ii1HgSSl.png)

Consider this classic (and very funny) scene from the American sitcom, [I Love Lucy](https://www.imdb.com/title/tt0043208/):

![https://www.youtube.com/watch?v=NkQ58I53mjk](https://img.youtube.com/vi/NkQ58I53mjk/0.jpg)

In this scene, when a chocolate travels down the conveyor belt, it's observed, picked up, wrapped, and then placed back. This is a good way of thinking how a proxy works. Here, the assembly workers (Lucy and Ethel) represents proxies, a chocolate represents a message, and the conveyor belt represents the network. It's a brilliant scene because the concepts of network latency and reliably are also personified.

This scene doesn't represent a network in all its aspects. For example, it only represents outbound traffic. Let's not forget that HTTP is a request-response protocol. What about inbound traffic? For this, we would have to imagine chocolates simultaneously travelling in the opposite direction. The assembly worker would modify and forward the chocolates in the same manner as before. When this occurs with a network, a proxy is defined as a "reverse proxy" or "gateway". In other words, an origin server for outbound messages; it translates requests and forwards them inbound.

## Telerik Fiddler as a Proxy

[Telerik Fiddler](https://www.telerik.com/fiddler) (or Fiddler) is a proxy that acts as an [intermediary](https://httpwg.org/http-core/draft-ietf-httpbis-semantics-latest.html#intermediaries) between a user agent (i.e. Google Chrome) and the network. Nearly all programs that use web protocols support integration with a proxy. As a result, Fiddler can be used with most applications without need for further configuration. When Fiddler starts to capture traffic, it registers itself with the [Windows Internet (WinINet)](https://docs.microsoft.com/windows/desktop/wininet/about-wininet) networking component and requests that all applications begin directing their requests to Fiddler.

![](https://i.imgur.com/SF40wep.png)

In the most common scenario where Fiddler is the only proxy that's configured to operate on the network, the architecture becomes a little simplier:

![](https://i.imgur.com/D6JqD1fl.png)

Many web developers will use Fiddler in this manner; to record web traffic that's generated by a browser to see what was transmitted. However, since Fiddler is a proxy, it may also process this web traffic. The HTTP specification enables proxies to operate in this manner. The act of processing web traffic can include responding to messages. In fact, Fiddler can be configured to respond to messages that match a set of criteria. For example, Fiddler's [AutoResponder](https://docs.telerik.com/fiddler/KnowledgeBase/AutoResponder) may be configured to serve local files (acting as a cache) or perform actions for messages it receives:

![](https://i.imgur.com/O2AkO1jl.png)

Incidentally, the AutoResponder supports a useful development scenario when resources and/or services may be unavailable. It may be used to mock API responses from a service. The AutoResponder may also be configured with a latency setting to simulate a more realistic response time.

The HTTP specification enables intermediaries to transform messages and their payloads (see [section 5.7.2](https://httpwg.org/specs/rfc7230.html#message.transformations)). Fiddler is capable of transforming messages through custom rules with FiddlerScript. FiddlerScript is one of the most powerful features in Fiddler; it can be used to enhance Fiddler's UI, add new features, and modify messages.

![](https://i.imgur.com/sZODz3T.png)

Two events are available that can be used to modify messages in transit: `OnBeforeRequest` and `OnBeforeResponse`. `OnBeforeRequest` is called before each request and `OnBeforeResponse` is called before each response.

```
static function OnBeforeRequest(oSession: Session) {
  // ...
}

static function OnBeforeResponse(oSession: Session) {
  // ...
}
```

## Telerik Fiddler as a Reverse Proxy

It can be useful to have Fiddler operate as a reverse proxy; an origin server for outbound messages that translates requests and forwards them inbound. To use this method with Fiddler, the hostname for requests to reroute must be **127.0.0.1:8888**, **localhost:8888**, **[::1]:8888**, or the machine's NETBIOS hostname on port **8888**.
